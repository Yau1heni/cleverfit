import{r as x,A as F,_ as f,u as w,c as j,d as G,e as H,F as s,a as y,j as e,I as l,V as C,v as p,R as T,s as b,C as N,f as c,h as M,k as z,l as D,E as R,m as I,n as q,o as L,P as v,p as V,q as B,S as W,T as $}from"./index-DhuYnFMF.js";var K={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M879.5 470.4c-.3-27-.4-54.2-.5-81.3h-80.8c-.3 27-.5 54.1-.7 81.3-27.2.1-54.2.3-81.2.6v80.9c27 .3 54.2.5 81.2.8.3 27 .3 54.1.5 81.1h80.9c.1-27 .3-54.1.5-81.3 27.2-.3 54.2-.4 81.2-.7v-80.9c-26.9-.2-54.1-.2-81.1-.5zm-530 .4c-.1 32.3 0 64.7.1 97 54.2 1.8 108.5 1 162.7 1.8-23.9 120.3-187.4 159.3-273.9 80.7-89-68.9-84.8-220 7.7-284 64.7-51.6 156.6-38.9 221.3 5.8 25.4-23.5 49.2-48.7 72.1-74.7-53.8-42.9-119.8-73.5-190-70.3-146.6-4.9-281.3 123.5-283.7 270.2-9.4 119.9 69.4 237.4 180.6 279.8 110.8 42.7 252.9 13.6 323.7-86 46.7-62.9 56.8-143.9 51.3-220-90.7-.7-181.3-.6-271.9-.3z"}}]},name:"google-plus",theme:"outlined"};const U=K;var A=function(r,o){return x.createElement(F,f(f({},r),{},{ref:o,icon:U}))};A.displayName="GooglePlusOutlined";const E=x.forwardRef(A),J=()=>{const a=w(),[r,o]=x.useState(!1),{pathname:d}=j(),m=G(H.isRememberMe),[n]=s.useForm(),{sm:i}=y(),u=()=>{if(n.getFieldValue("email")){const t=n.getFieldsValue(["email"]);a(M({email:t.email,pathname:d}))}else o(!0)},h=t=>a(z.setIsRememberMe({isRememberMe:t.target.checked})),S=({email:t,password:g})=>{a(D({email:t,password:g,pathname:d}))},_=()=>{const t=n.getFieldsError(["email"]).some(({errors:g})=>g.length);o(t)},k=()=>{window.location.href="https://marathon-api.clevertec.ru/auth/google"},O=t=>t?e.jsx(R,{}):e.jsx(I,{});return e.jsxs(s,{form:n,onFinish:S,onFieldsChange:_,initialValues:{remember:m},children:[e.jsx(s.Item,{name:"email",rules:[{required:!0,type:"email",message:""}],children:e.jsx(l,{addonBefore:"e-mail: ",size:"large",autoComplete:"on","data-test-id":"login-email"})}),e.jsx(s.Item,{name:"password",rules:[{required:!0,pattern:C,message:p.PASSWORD_HELP}],children:e.jsx(l.Password,{placeholder:"Пароль",iconRender:O,autoComplete:"off",size:"large","data-test-id":"login-password"})}),e.jsxs(T,{justify:"space-between",className:b.remember,children:[e.jsx(s.Item,{name:"remember",valuePropName:"checked",children:e.jsx(N,{"data-test-id":"login-remember",value:m,onChange:h,children:"Запомнить меня"})}),e.jsx(c,{onClick:u,disabled:r,type:"link",style:{textAlign:"center"},"data-test-id":"login-forgot-button",children:"Забыли пароль?"})]}),e.jsx(s.Item,{children:e.jsxs("div",{className:b.buttonsContainer,children:[e.jsx(c,{type:"primary",htmlType:"submit","data-test-id":"login-submit-button",children:"Войти"}),e.jsx(c,{onClick:k,icon:i&&e.jsx(E,{}),type:"text",children:"Войти через Google"})]})})]})},Q=()=>{const a=w(),{pathname:r}=j(),{sm:o}=y(),d=({email:i,password:u})=>{a(L({email:i,password:u,pathname:r}))},m=()=>{window.location.href="https://marathon-api.clevertec.ru/auth/google"},n=i=>i?e.jsx(R,{}):e.jsx(I,{});return e.jsxs(s,{onFinish:d,children:[e.jsx(s.Item,{name:"email",rules:[{required:!0,message:""}],children:e.jsx(l,{addonBefore:"e-mail: ",autoComplete:"on",size:"large","data-test-id":"registration-email"})}),e.jsx(s.Item,{name:"password",help:p.PASSWORD_HELP,rules:[{required:!0,pattern:C}],children:e.jsx(l.Password,{placeholder:"Пароль",size:"large",iconRender:n,autoComplete:"off","data-test-id":"registration-password"})}),e.jsx(s.Item,{name:"confirmPassword",dependencies:["password"],rules:[{required:!0,message:""},({getFieldValue:i})=>({validator(u,h){return!h||i("password")===h?Promise.resolve():Promise.reject(new Error(p.CONFIRM_PASSWORD_ERROR))}})],children:e.jsx(l.Password,{placeholder:"Повторите пароль",size:"large",iconRender:n,autoComplete:"off","data-test-id":"registration-confirm-password"})}),e.jsx(s.Item,{children:e.jsxs("div",{className:q.buttonsContainer,children:[e.jsx(c,{type:"primary",htmlType:"submit","data-test-id":"registration-submit-button",children:"Войти"}),e.jsx(c,{type:"text",onClick:m,icon:o&&e.jsx(E,{}),children:"Регистрация через Google"})]})})]})},X=[{label:"Вход",key:v.AUTH,children:e.jsx(J,{})},{label:"Регистрация",key:v.REGISTRATION,children:e.jsx(Q,{})}],Y="_auth_xvty0_1",Z="_logo_xvty0_23",P={auth:Y,logo:Z},se=()=>{const a=V(),{pathname:r}=j();return e.jsx(B,{children:e.jsxs("div",{className:P.auth,children:[e.jsx(W,{className:P.logo}),e.jsx($,{onTabClick:o=>a(o),size:"large",items:X,defaultActiveKey:r,centered:!0})]})})};export{se as default};
